## [CH04_03] 프롬프팅 확장 테크닉

### 프롬프팅 테크닉(확장)
- Expert Prompting
- According to Wikipedia
- Generated Knowledge Prompting
- Retrieval Argumented Generation (RAG)
- Tree-of-Thought
- Plan-and-Solve Prompting
- Automatic Prompt Engineer

---

## 예시를 만들고 생각하게 하는 방법

### Expert Prompting
- LLM에게 **전문가로서 응답하도록 요청**하는 방법
- **배경 지식을 암시적으로 이해하고 답변**함으로써 성능이 크게 향상
- LLM에게 프롬프트/질문과 관련된 특정 분야의 전문가를 찾아달라고 요청하고
  - 제시 받은 전문가인 것처럼 질문에 응답하도록 하여
  - **도메인이 정해지지 않은 서비스에도 제네럴하게 활용**할 수 있음
- 논란의 여지가 있었으나, MIT 수학 및 EECS 커리큘럼 탐색에 매우 뛰어난 성능을 얻었다고 함

### According to Wikipedia
- 단순히 "위키피디아를 참조해서 답하세요"라고 하는 것만으로도 높은 성을 얻을 수 있음
- LLM이 학습한 지식 베이스가 있다면,
  - **해당 내용을 참조하라고 하는 것만으로도 더 정확한 답변**을 할 수 있음

### Generated Knowledge Prompting
- 최근에 많이 언급되는 방법
- 답변에 해당하는 **지식을 먼저 생성하라고 하고, 그 뒤 생성한 지식을 바탕으로 답변**하는 기법
- `According to Wikipedia`등의 기법과 마찬가지로
  - **구체적인 지식을 바탕으로 답하게 함**
- 단, 생성 AI의 특성상, 아주 정확한 지식을 생성할 것이라는 보장이 없으므로,
  - **생성 결과를 주의 깊게 평가 할 필요가 있음**

### Retrieval Argumented Generation
- 생성하기 전, 사용자의 요청과 관련된 지식을 검색 컴포넌트에서 검색해와서,
  - 해당 내용을 프롬프트에 컨텍스트로 제공하여 결과 생성
- **답변의 정확도**를 극도로 높이기 위한 가장 좋고 확실한 방법으로,
  - **RAG는 프롬프트 엔지니어링의 필수적인 구성 요소**가 되었고
- 이에 따라 Vector Search가 매우 중요한 구성 요소로 자리 잡음
- 단순한 검색뿐 아니라, 복잡한 수식을 계산하는 수학 문제 풀이 엔진을 통해
  - 결과를 생성하여 가져오는 방법 또한 RAG라고 할 수 있음
- **GhatGPT Plugin**이 RAG의 극의라고 할 수 있음


## 전략을 짜고 스스로 평가하는 방법

### Tree-of-Thought
- Tree 구조로 답변을 생성해 내면서,
  - **중간 단계에서 진행 상황을 스스로 평가하여 생각 트리를 확장하고 조정**
- **생성한 결과와 평가를 통해 앞뒤로 생각을 체계적으로 탐색**
  - 매우 높은 수준의 사고
- 매우 많은 생성 단계를 거치게 되므로 일반적으로 사용하기는 어려움
- **고도의 생성 전략**이 필요한 경우 다른 PE기법들과 혼합해 사용하면 높은 성능을 기대할 수 있음

### Plan-and-Solve Prompting
- CoT, SC 등의 기법을 사용했을때, 답변이 잘못되는 케이스 중
  - 가장 큰 문제는 **중간 문제 풀이 단계가 누락되는 경우**
- 단계 누락의 오류를 해결하는 방법
- 전체 작업을 **더 작은 하위 작업으로 계획을 세우고**
  - **그 계획에 따라 하위 작업을 수행하거나 평가하면서 전체 문제를 해결**하는 기법
- Least-to-Most가 풀어야 할 문제를 단계적으로 생성해가면서 문제를 푼다면,
  - PS는 **미리 풀어야할 하위 문제를 모두 생성해두고 문제를 푼다**는 것이 다름

### Automatic Prompt Engineer
- **LLM으로 프롬프트를 자동 생성**하는 기법
- 프롬프트에 `<INSERT>`라는 빈 칸을 만들고, 생성 결과를 함께 주면서
  - 모델에게 `<INSERT>` 부분을 채우도록 하는 방법을 반복하는 기법
- `<INSERT>` 부분을 채울만한 답변을 여러개 생성하고,
  - 생성한 답변으로 완성한 프롬프트로 최종 결과를 생성
  - 최종 결과를 채점하여 가장 높은 점수를 받은 프롬프트를 사용
- 아직 완전한 프롬프트를 처음부터 만들어내는 것은 한계가 있고,
  - 기본 프롬프트를 작성하고 성능을 올리기 위한 **파인튜닝의 개념으로 사용**

## Key Point
- 예시를 제공한다
- 생각을 많이 하게 만든다
- 문제 풀이 전략을 세우게 한다
- 스스로 평가한다
