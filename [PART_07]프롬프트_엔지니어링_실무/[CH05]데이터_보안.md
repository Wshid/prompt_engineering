## [CH07_05] 데이터 보안

### 오해
- ChatGPT 서비스에 입력한 데이터는 학습 데이터로 사용
- **API로 호출한 데이터는 학습 데이터로 쓰이지 않음**
  - ChatGPT도 설정에서 opt-out 할 수 있음
- 암호화 한 프롬프트를 입력해도 이해하고 생성할 수 있으나, 대부분 작동하지 않음
  - 가능한 경우는 인간이 해독할 수 있는 경우 정도
  - e.g. 카이사르 암호

### 사실
- API를 통해 제출된 콘텐츠는 무단 사용 및 악용 모니터링을 위해
  - **최대 30일 동안 보관**한 뒤 삭제
- OpenAI의 제한된 권한이 있는 직원과
  - 기밀 유지 및 보안 의무를 지닌 전문 제 3자 계약자(subprocessor)는
  - 무단 사용 혐의를 조사하고 검증하기 위해서만 이 데이터 접근 가능
- 격리된 서버에서 처리가 필요한 경우
  - 마스킹 기법 등을 통해서 **비식별화 처리**해서 사용 가능

### 정책
- MS Azure의 경우 다양한 region을 지원
- 데이터 정책에 적합한 region을 선택하여 배포
  - gpt-4, gpt-3.5-turbo, text-embedding-ada-002 별로 다름
- 한국 region은 없음
  - 언제 될지 모르므로, 클로바 같은 한국의 LLM을 기다리는게 나을 수 있음

### 마스킹
- 사용자 입력, DBA에서 가져온 정보
  - 개인정보 있는지 내부적 판별 및 개인정보 마스킹
- 마스킹된 정보를 기반으로 프롬프트를 합성하여 **GPT-API**를 호출, 프롬프트 생성
- 생성 결과에 개인정보를 주입하여 활용

#### Example
```md
# Prompt
다음 사용자에게 상품 배송이 늦어진다는 사과 메일을 작성해줘
메일 생성에 필요한 정보는 다음처럼 마스킹해줘

이름: <NAME>
이메일:<EMAIL>
주문번호:<ORDER-ID>

# Output
제목: 상품 배송 연체에 대한 사과 및 안내
안녕하세요, <NAME>님,
저희 쇼핑몰을 이용해 주셔서 진심으로 감사드립니다. 
이번에는 주문번호 <ORDER-ID>로 신속한 상품 배송을 약속드린 것에도 불구하고, 예상보다 시간이 더 소요되어 정말 죄송합니다.

# 정보 합성
제목: 상품 배송 연체에 대한 사과 및 안내
안녕하세요, `사람1`님.
저희 쇼핑몰을 이용해 주셔서 진심으로 감사드립니다. 
이번에는 주문번호 `20230729`로 신속한 상품 배송을 약속드린 것에도 불구하고, 예상보다 시간이 더 소요되어 정말 죄송합니다.
```

### 결론
- 일반적으로는 위와 같이 대치하여 사용해도 이슈 없겠으나,
- 더 민감하게 데이터 처리가 필요한 경우
  - 마스킹 기법을 사용하여 Cloud API를 사용
- Public API를 사용할 수 없다고 판단시,
  - **Open Source LLM을 fine-tuning하여 사용하는 방법도 고려**
