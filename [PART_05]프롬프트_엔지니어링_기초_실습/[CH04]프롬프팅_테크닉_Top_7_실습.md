## [CH05_04] 프롬프팅 테크닉 Top 7 실습

### 실습
- chat gpt playground에서 수행
```md
# USER
고양이: 동물
오렌지: 과일
토마토: 식물
비둘기:

# ASSISTANT
조류
```
```md
# USER
고양이: 동물
호랑이: 동물
조랑말: 동물
비둘기:

# ASSISTANT
동물
```
- 꼭 예시를 들때 범위를 넓게 잡아주어야 함 


### CoT
```md
# USER
Q: 철수는 테니스공 5개를 가지고 있습니다. 철수는 테니스공 을 담은 통을 2개 더 샀는데, 각 통에는 테니스공 3개가 있습 니다. 철수는 이제 몇 개의 테니스공을 가지고 있을까요?
A: 정답은 11개 입니다.
Q: 식당에 사과가 23개 있었습니다. 점심을 만들기 위해 20 개를 사용하고 6개를 더 산 뒤 3개를 먹었다면, 사과가 몇 개 남았을까요?
A: 

# ASSISTANT
사과가 4개 남았습니다
```
```md
# USER
Q: 철수는 테니스공 5개를 가지고 있습니다. 철수는 테니스공 을 담은 통을 2개 더 샀는데, 각 통에는 테니스공 3개가 있습 니다. 철수는 이제 몇 개의 테니스공을 가지고 있을까요?
A: A: 철수는 처음에 테니스공 5개를 가지고 있었습니다. 통 하 나에 테니스공 3개씩 들어있는 통을 2개 샀으니, 총 6개의 테 니스공이 추가 됩니다. 5+ 6= 11. 따라서 답은 11개입니다
Q: 식당에 사과가 23개 있었습니다. 점심을 만들기 위해 20 개를 사용하고 6개를 더 산 뒤 3개를 먹었다면, 사과가 몇 개 남았을까요?
A: 

# ASSISTANT
식당에 처음에는 23개의 사과가 있었습니다. 이 중 20개를 사용했으므로 23 - 20 = 3개의 사과가 남았습니다. 그런 다음 6개의 사과를 더 샀으므로 3 + 6 = 9개의 사과가 되었습니다. 마지막으로 3개의 사과를 먹었으므로 9 - 3 = 6개의 사과가 남았습니다. 따라서 6개의 사과가 남았습니다.
```

### Zero shot CoT
```md
# USER
Q: 식당에 사과가 23개 있었습니다. 점심을 만들기 위해 20 개를 사용하고 6개를 더 산 뒤 3개를 먹었다면, 사과가 몇 개 남았을까요?
단계별로 생각해봅시다.

# ASSISTANT
이 문제를 단계별로 해결해 보겠습니다.

1. 먼저, 식당에 23개의 사과가 있었습니다.
2. 점심을 만들기 위해 20개를 사용했습니다. 따라서 23 - 20 = 3개의 사과가 남았습니다.
3. 그런 다음 6개를 더 구입했으므로, 3 + 6 = 9개의 사과가 있게 됩니다.
4. 마지막으로, 3개의 사과를 먹었습니다. 따라서 9 - 3 = 6개의 사과가 남게 됩니다.
따라서 사과는 6개가 남게 됩니다.
```

### Self Consistency
- Complete mode(Legacy)
  - davinci에게 질문
  - 여러가지 질문, 답변의 예시 제공
    ```md
    Q: ...
    A: ...
    Q: ...
    A: ...
    ```
  - `Inject start test: 'A:'` 제공
- Chat Mode
  - Complete 모드에서 제공했던 Q,A들을 System에 기입
  - User: 마지막 질문에 대한 내용 기입
  - gpt 3.5에게 질문
  - gpt 4에게 질문
- davinci, gpt 3.5, gpt 4의 답변중 가장 겹치는 답을 선택

### Selection Inference
- Context를 System이나 User에게 기입
```md
# SYSTEM
Context：
만약 누군가가 조용하다면, 그들은 흰색입니다.
만약 누군가가 젊고 빨갛다면, 그들은 흰 색입니다.
젊은 사람들은 친절합니다.
만약 누군가가 친절하다면, 그들은 둥급니다.
모든 조용한 사람들은 젊습니다.
빨갛고, 큰 사람들은 친절합니다.
둥근, 빨간 사람들은 흰색입니다.
만약 누군가가 둥글다면, 그들은 조용합니다.
해리는 젊습니다.
밥은 빨강입니다.
밥은 큽니다

# USER
Question: 이것은 "해리는 조용하지 않다"라는 문장이 참인지를 암시하나요?

# ASSISTANT
Answer: 아니요, 그렇지 않습니다. 문장은 '해리는 젊습니다'라고 말하고, '모든 조용한 사람들은 젊습니다'라고 말합니다. 이것은 '해리가 조용할 수 있음'을 암시합니다.
```
- 이후 SYSTEM을 유지하고 재질문
```md
# USER
질문의 답에 필요한 내용을 Context에서 추출해서 나열하세요

# ASSISTANT
해리는 젊다.
만약 누군가가 젊다면, 그들은 흰색이다.
모든 조용한 사람들은 젊다.
둥근, 빨간 사람들은 흰색이다.
만약 누군가가 둥글다면, 그들은 조용하다.
해리는 조용하지 않다고 결론을 내릴 수 있습니다. 이는 조용 한 사람들은 모두 젊고, 둥글다는 조건을 가지는데, 해리는 젊 지만 둥글지 않으므로 조용하지 않다고 할 수 있습니다.
```
- Assistant의 답변을 Select: 태그를 붙여 재질문
```md
Selection:
해리는 젊다.
만약 누군가가 젊다면, 그들은 흰색이다.
모든 조용한 사람들은 젊다.
둥근, 빨간 사람들은 흰색이다.
만약 누군가가 둥글다면, 그들은 조용하다.
해리는 조용하지 않다고 결론을 내릴 수 있습니다. 이는 조용 한 사람들은 모두 젊고, 둥글다는 조건을 가지는데, 해리는 젊 지만 둥글지 않으므로 조용하지 않다고 할 수 있습니다.

# USER
Selection의 내용에 기반해 Question에 대해 답하세요

# ASSISTANT
해리는 조용하지 않은 사람이라고 결론을 내릴 수 있습니다.
해리는 젊은 사람이고, 조용한 사람들은 모두 젊으면 둥글다 는 조건을 가진다고 되어 있습니다. 하지만 해리는 둥글지 않으므로 조용하지 않은 사람으로 판단할 수 있습니다.
```

### Least to Most
- 최초 질문
  ```md
  # USER
  Context: 영희가 미끄럼 꼭대기까지 올라가는데 4분이 걸 립니다. 그녀가 내려오는 데는 1분이 걸립니다. 미끄럼틀이 15 분 후에 문을 닫습니다.
  Question: 그녀가 문이 닫히기 전에 몇 번 미끄러질 수 있을까요?

  # USER
  이 문제에 답을 하기 위해 먼저 풀어야 할 하위 질문을 하나 만들어주세요

  # ASSISTANT
  미끄럼틀에서 영희가 한 번 미끄러지고 다시 올라가는데 걸리는 시간은 얼마인가요?
  ```
- 최초 질문을 마지막 Assistant가 답변해준 질문으로 수정
  ```md
  # USER
  Context: 영희가 미끄럼 꼭대기까지 올라가는데 4분이 걸 립니다. 그녀가 내려오는 데는 1분이 걸립니다. 미끄럼틀이 15 분 후에 문을 닫습니다.
  Question:미끄럼틀에서 영희가 한 번 미끄러지고 다시 올라가는데 걸리는 시간은 얼마인가요?

  # ASSISTANT
  미끄럼들에서 영희가 한 번 미끄러지고 다시 올라가는데 걸리 는 시간은 5분입니다. 이는 영희가 올라가는 데 4분이 걸리고, 내려오는 데 1분이 걸리기 때문입니다.
  ```
- 중간 예시로 활용하여 다음과 같이 질문
  ```md
  # USER
  Context: 영희가 미끄럼 꼭대기까지 올라가는데 4분이 걸 립니다. 그녀가 내려오는 데는 1분이 걸립니다. 미끄럼틀이 15 분 후에 문을 닫습니다.
  Question: 그녀가 문이 닫히기 전에 몇 번 미끄러질 수 있을까요?
  Answer: 미끄럼들에서 영희가 한 번 미끄러지고 다시 올라가는데 걸리 는 시간은 5분입니다. 이는 영희가 올라가는 데 4분이 걸리고, 내려오는 데 1분이 걸리기 때문입니다.

  Question: 그녀가 문이 닫히기 전에 몇 번 미끄러질 수 있을까요? 단계적으로 생각해보세요

  # ASSISTANT
  1. 미끄럼틀을 올라가는데 4분이 걸리고 내려오는데 1분이 걸리므로, 한 번의 사이클에는 총 5분이 걸립니다.
  2. 문이 닫히기까지의 시간은 15분이므로, 총 15분 동안 영 희는 몇 번의 사이클을 완료할 수 있는지 계산해야 합니다.
  3. 15분을 5분으로 나누면, 총 3번의 사이클을 완료할 수 있 습니다.
  4. 따라서, 문이 닫히기 전에 영희는 총 3번의 사이클을 완료하고, 3번 미끄러질 수 있습니다.
  ```

### React
- 어떤 툴을 사용할지 제공
- 예시 본문은 `Search, Lookup, Finish` 관련
- 예시와 지시문을 `---`등으로 구분 필요

### Self evaluation
```md
# USER
9+10x3 을 계산하세요.
다음 포맷으로 답변하세요.
Answer: {number}

# ASSISTANT
Answer: 27
```
- 검토 요청
```md
# USER
답변을 맞게 했는지 단계적으로 생각해보세요.
당신의 답변이 들렸다면 들린 이유를 설명하세요.
설명만 작성하세요. 그 외의 부가적인 말은 하지 마세요.

# ASSISTANT
9+ 10 x 3을 계산해 보면 다음과 같습니다.
1. 먼저 10 x 3을 계산합니다. 10 곱하기 3은 30입니다.
2. 그 후에 9와 30을 더합니다. 9더하기 30은 39입니다.
따라서, 올바른 답은 39입니다. 처음에 작성한 답변인 27
은 잘못된 값입니다.

# USER
당신의 평가를 참고하여 처음 질문에 대한 답변을 다시 하세 요.
다음 포맷으로 답변하세요. Answer: {number}

# ASSISTANT
Answer: 39
```
